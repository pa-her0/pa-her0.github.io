<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>算法知识册 - 🦖</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="🦖"><meta name="msapplication-TileImage" content="/img/Whale.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="🦖"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="本文章是 基于 左神课程 + 牛客课程 进行算法系统式学习的知识汇总。"><meta property="og:type" content="article"><meta property="og:title" content="算法知识册"><meta property="og:url" content="http://whalefall.fun/2025/05/06/%E7%AE%97%E6%B3%95%E6%9D%BF%E5%AD%90/"><meta property="og:site_name" content="🦖"><meta property="og:description" content="本文章是 基于 左神课程 + 牛客课程 进行算法系统式学习的知识汇总。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://whalefall.fun/img/ACM.png"><meta property="article:published_time" content="2025-05-06T08:48:00.000Z"><meta property="article:modified_time" content="2025-07-03T03:37:37.046Z"><meta property="article:author" content="Jiely"><meta property="article:tag" content="沉淀"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://whalefall.fun/img/ACM.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://whalefall.fun/2025/05/06/%E7%AE%97%E6%B3%95%E6%9D%BF%E5%AD%90/"},"headline":"算法知识册","image":["http://whalefall.fun/img/ACM.png"],"datePublished":"2025-05-06T08:48:00.000Z","dateModified":"2025-07-03T03:37:37.046Z","author":{"@type":"Person","name":"Jiely"},"publisher":{"@type":"Organization","name":"🦖","logo":{"@type":"ImageObject","url":{"light":"/img/drange2.png","dark":"/img/ex4.png"}}},"description":"本文章是 基于 左神课程 + 牛客课程 进行算法系统式学习的知识汇总。"}</script><link rel="canonical" href="http://whalefall.fun/2025/05/06/%E7%AE%97%E6%B3%95%E6%9D%BF%E5%AD%90/"><link rel="alternate" href="/atom.xml" title="🦖" type="application/atom+xml"><link rel="icon" href="/img/Whale.png"><link rel="stylesheet" href="/css/font/fontawesome/css/all.min.css"><link data-pjax rel="stylesheet" href="/js/imaegoo/highlight.js/11.7.0/styles/tokyo-night-dark.css"><link data-pjax rel="stylesheet" href="/css/default.css"><!--!--><!--!--><script src="https://vercount.one/js" defer></script><link rel="stylesheet" href="/js/imaegoo/lightgallery/1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="/js/imaegoo/justifiedGallery/3.8.1/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=G-RCCCLYKRH5" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'G-RCCCLYKRH5');</script><!--!--><!--!--><!--!--><link rel="stylesheet" href="/js/imaegoo/cookieconsent/3.1.1/build/cookieconsent.min.css"><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body class="is-2-column"><script type="text/javascript" src="/js/imaegoo/night.js"></script><canvas id="universe"></canvas><style>
                    /* 针对桌面端 (desktop) 视口，设置最大宽度 */
                    @media screen and (min-width: 1024px) {
                        .container {
                            max-width: 1000px !important; /* 调整为更小的宽度，您可以根据需要修改此值 */
                        }
                    }
                    /* 针对宽屏 (widescreen) 视口，设置最大宽度 */
                    @media screen and (min-width: 1216px) {
                        .container {
                            max-width: 1100px !important; /* 调整为更小的宽度 */
                        }
                    }
                    /* 针对全高清 (fullhd) 视口，设置最大宽度 */
                    @media screen and (min-width: 1408px) {
                        .container {
                            max-width: 1200px !important; /* 调整为更小的宽度 */
                        }
                    }
                </style><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img class="logo-img" src="/img/drange2.png" alt="🦖" height="28"><img class="logo-img-dark" src="/img/ex4.png" alt="🦖" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives/">时间轴</a><a class="navbar-item" href="/categories/">分类</a><a class="navbar-item" href="/tags/">标签</a><a class="navbar-item" href="/about/">关于</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i><span>  目录</span></a><a class="navbar-item night" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon" id="night-icon"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-10-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="/img/ACM.png" alt="算法知识册" referrerpolicy="no-referrer"></span></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><i class="fas fa-thumbtack level-item" title="Pinned"></i><span class="level-item"><time dateTime="2025-05-06T08:48:00.000Z" title="2025/5/6 16:48:00">2025-05-06</time>发表</span><span class="level-item"><time dateTime="2025-07-03T03:37:37.046Z" title="2025/7/3 11:37:37">2025-07-03</time>更新</span><span class="level-item"><a class="link-muted" href="/categoriehexo-theme-claudias/%E7%AE%97%E6%B3%95/">算法</a></span><span class="level-item">39 分钟读完 (大约5832个字)</span><span class="level-item leancloud_visitors" id="/2025/05/06/%E7%AE%97%E6%B3%95%E6%9D%BF%E5%AD%90/" data-flag-title="算法知识册"><i class="far fa-eye"></i>&nbsp;&nbsp;<span id="twikoo_visitors"><i class="fa fa-spinner fa-spin"></i></span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">算法知识册</h1><div class="content"><blockquote class="alert alert-note">
<p>本文章是 基于 左神课程 + 牛客课程 进行算法系统式学习的知识汇总。</p>
</blockquote>
<span id="more"></span>
<h1>算法之旅</h1>
<h2 id="基础算法">基础算法</h2>
<h4 id="单调队列">单调队列</h4>
<blockquote class="alert alert-note">
<p>这是一次尝试</p>
</blockquote>
<h4 id="单调栈">单调栈</h4>
<h4 id="逆序对">逆序对</h4>
<ol>
<li class="lvl-3">
<p>树状数组</p>
</li>
</ol>
<blockquote>
<p>使用树状数组来求逆序队，主要要进行离散化，应为可以 a[i] 的值很大，但是 数组大小有限，不离散化的话，可能树状数组的 tree数组存不下。</p>
</blockquote>
<p>思路：从数组的右边开始便利，访问到当前元素的时候，检查树状数组中求和（比当前元素小的元素），因为是从右往左便利，如果有比当前元素小的，肯定在数组中是在当前元素的右边。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">#<span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> tree[N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">lowbit</span><span class="params">(<span class="type">int</span> i)</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> i &amp; -i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> w)</span></span>&#123;</span><br><span class="line">	<span class="keyword">while</span>(i &lt;= n)&#123;</span><br><span class="line">		tree[i] += w;</span><br><span class="line">		i += <span class="built_in">lowbit</span>(i);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 1 - r</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">sum</span><span class="params">(<span class="type">int</span> r)</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(r &gt; <span class="number">0</span>)&#123;</span><br><span class="line">		ans += tree[r];</span><br><span class="line">		r-= <span class="built_in">lowbit</span>(r);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	cin &gt;&gt; n;</span><br><span class="line">	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n)</span></span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)	cin &gt;&gt; a[i];</span><br><span class="line">	<span class="comment">// 离散化</span></span><br><span class="line">    <span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">b</span><span class="params">(n)</span></span>;</span><br><span class="line">	b = a</span><br><span class="line">	<span class="built_in">sort</span>(b.<span class="built_in">begin</span>(), b.<span class="built_in">end</span>());</span><br><span class="line">	map&lt;<span class="type">int</span>, <span class="type">int</span>&gt; mp;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) mp[b[i]] = i + <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// 求逆序队</span></span><br><span class="line">	<span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = n - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)&#123;</span><br><span class="line">		<span class="type">int</span> r = <span class="built_in">sum</span>(mp[a[i]] - <span class="number">1</span>);</span><br><span class="line">		ans += r;</span><br><span class="line">		<span class="built_in">add</span>(mp[a[i]], <span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="归并分治">归并分治</h4>
<blockquote>
<p>分治的含义是 整体的答案 $?=$ 左边的答案 + 右边的答案</p>
</blockquote>
<ol>
<li class="lvl-3">
<p>归并排序</p>
</li>
</ol>
<blockquote>
<p>归并排序是一个稳定的排序</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>整体的有序 是 <strong>左边有序 + 右边有序 + 合并过程</strong></p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">merge</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r)</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">	<span class="type">int</span> i = l, j = mid + <span class="number">1</span>, t1 = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(i &lt;= mid &amp;&amp; j &lt;= r)&#123;</span><br><span class="line">		help[t1++] = (a[i] &lt;= a[j]) ? a[i++] :a[j++];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">while</span>(i &lt;= mid) help[t1++] = a[i++];</span><br><span class="line">	<span class="keyword">while</span>(j &lt;= r) help[t1++] = a[j++];</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = r; i &gt;= l; i--)&#123;</span><br><span class="line">		a[i] = help[--t1];</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">guibin</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(l &gt;= r) <span class="keyword">return</span>;</span><br><span class="line">	<span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">	<span class="built_in">guibin</span>(l, mid);</span><br><span class="line">	<span class="built_in">guibin</span>(mid + <span class="number">1</span>, r);</span><br><span class="line">	<span class="built_in">merge</span>(l, r);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>分治题目：<br>
<a target="_blank" rel="noopener" href="https://leetcode.com/problem-list/divide-and-conquer/">leetcode-分治</a></p>
<h4 id="随机快排">随机快排</h4>
<p>$$</p>
<p>$$</p>
<h4 id="离散化">离散化</h4>
<blockquote>
<p>如果数据规模大，但是数据量小的话，我们可以进行离散化处理。</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>给每一个值一个编号</p>
</li>
<li class="lvl-2">
<p>法一</p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">b</span><span class="params">(n)</span></span>;</span><br><span class="line">b = a;</span><br><span class="line"><span class="built_in">sort</span>(b.<span class="built_in">begin</span>(), b.<span class="built_in">end</span>());</span><br><span class="line">b.<span class="built_in">erase</span>(<span class="built_in">unique</span>(b.<span class="built_in">begin</span>(), b.<span class="built_in">end</span>()), b.<span class="built_in">end</span>());</span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt; mp;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; b.<span class="built_in">size</span>(); i++)&#123;mp[b[i]] = i;&#125;</span><br></pre></td></tr></table></figure>
<h4 id="类并查集">类并查集</h4>
<blockquote>
<p>如果是分联通块进行计算，我们可以不使用并查集，使用一个简单的思路，给每一个联通块<strong>编号</strong>，从而来考虑每一个联通块之间的关系。</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p><a target="_blank" rel="noopener" href="https://codeforces.com/problemset/problem/2060/E">E. Graph Composition(div3)</a></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">#<span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> __()&#123;</span><br><span class="line">	<span class="type">int</span> n, m1, m2;</span><br><span class="line">	cin &gt;&gt; n &gt;&gt; m1 &gt;&gt; m2;</span><br><span class="line">	vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">a1</span>(n + <span class="number">1</span>);</span><br><span class="line">	vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">a2</span>(n + <span class="number">1</span>);</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; m1; i++)&#123;</span><br><span class="line">		<span class="type">int</span> u, v;</span><br><span class="line">		cin &gt;&gt; u &gt;&gt; v;</span><br><span class="line">		a1[u].<span class="built_in">push_back</span>(v);</span><br><span class="line">		a1[v].<span class="built_in">push_back</span>(u);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; m2; i++)&#123;</span><br><span class="line">		<span class="type">int</span> u, v;</span><br><span class="line">		cin &gt;&gt; u &gt;&gt; v;</span><br><span class="line">		a2[u].<span class="built_in">push_back</span>(v);</span><br><span class="line">		a2[v].<span class="built_in">push_back</span>(u);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 进行编号</span></span><br><span class="line">	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">col1</span><span class="params">(n + <span class="number">1</span>,<span class="number">0</span>)</span></span>;</span><br><span class="line">	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">col2</span><span class="params">(n + <span class="number">1</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">	<span class="keyword">auto</span> dfs2 = [&amp;](<span class="keyword">auto</span> f,<span class="type">int</span> u, <span class="type">int</span> k) -&gt; <span class="type">void</span>&#123;</span><br><span class="line">		col2[u] = k;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">auto</span> x : a2[u])&#123;</span><br><span class="line">			<span class="keyword">if</span>(col2[x] == <span class="number">0</span>)&#123;</span><br><span class="line">				<span class="built_in">f</span>(f,x,k);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="keyword">auto</span> dfs1 = [&amp;](<span class="keyword">auto</span> f, <span class="type">int</span> u, <span class="type">int</span> k) -&gt; <span class="type">int</span>&#123;</span><br><span class="line">		<span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">		col1[u] = k;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">auto</span> x : a1[u])&#123;</span><br><span class="line">			<span class="keyword">if</span>(col1[x] == <span class="number">0</span>)&#123;</span><br><span class="line">			<span class="keyword">if</span>(col2[x] != k) cnt++;</span><br><span class="line">			<span class="keyword">else</span> cnt += <span class="built_in">f</span>(f,x,k);&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> cnt;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(col2[i] == <span class="number">0</span>)&#123;</span><br><span class="line">			<span class="built_in">dfs2</span>(dfs2,i,i);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(col1[i] == <span class="number">0</span>)&#123;</span><br><span class="line">			ans += <span class="built_in">dfs1</span>(dfs1,i,col2[i]);</span><br><span class="line">			<span class="keyword">if</span>(col2[i] &lt; i) ans ++; <span class="comment">// 在前面有代表节点的时候便已经访问过这个节点，但是在F图中这个 i 节点并没有被 初始化，说明前面的代表节点和这个节点之间应该要增加一条边</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> _;</span><br><span class="line">	cin &gt;&gt; _;</span><br><span class="line">	<span class="keyword">while</span>(_--) __();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="快速幂">快速幂</h4>
<h6 id="无-mod">无 mod</h6>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">fpw</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> res = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">while</span>(b)&#123;</span><br><span class="line">		<span class="keyword">if</span>(b &amp; <span class="number">1</span>) res *= a;</span><br><span class="line">		a *= a;</span><br><span class="line">		b &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="有mod">有mod</h6>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">fpw</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b, <span class="type">int</span> mod)</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> res = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">while</span>(b)&#123;</span><br><span class="line">		<span class="keyword">if</span>(b &amp; <span class="number">1</span>)&#123;</span><br><span class="line">			res = res * a % mod;</span><br><span class="line">		&#125;</span><br><span class="line">		a = a * a % mod;</span><br><span class="line">		b &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> res % mod;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="乘法逆元">乘法逆元</h4>
<h6 id="线性">线性</h6>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">inv[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">  inv[i] = (<span class="type">long</span> <span class="type">long</span>)(p - p / i) * inv[p % i] % p;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="扩展欧几里得">扩展欧几里得</h6>
<h6 id="费马小">费马小</h6>
<p>$$<br>
ax \equiv 1(mod ; b) \<br>
x = a^{b - 2}(mod ; b)<br>
$$</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="built_in">fpw</span>(a, b<span class="number">-2</span>,b)</span><br></pre></td></tr></table></figure>
<h2 id="数据结构">数据结构</h2>
<h4 id="折半搜索">折半搜索</h4>
<p><a target="_blank" rel="noopener" href="https://oi-wiki.org/search/bidirectional/">OI WIKI - Meet in the middle</a></p>
<h4 id="并查集">并查集</h4>
<h6 id="基础并查集">基础并查集</h6>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> father[N];</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">()</span></span>&#123; <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; N; i++) father[i] = i; &#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find</span><span class="params">(<span class="type">int</span> x)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(x != father[x])&#123;</span><br><span class="line">		father[x] = <span class="built_in">find</span>(father[x]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">un</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> fx = <span class="built_in">find</span>(x), fy = <span class="built_in">find</span>(y);</span><br><span class="line">	<span class="keyword">if</span>(fx != fy)&#123;</span><br><span class="line">		father[fx] = fy;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="带权并查集">带权并查集</h6>
<blockquote>
<p>个人感觉带权并查集有点类似于 树形DP，后续补充</p>
</blockquote>
<p>‘hello’</p>
<h4 id="前缀和-差分">前缀和 + 差分</h4>
<h6 id="前缀和">前缀和</h6>
<p>######## 一维</p>
<p>$$<br>
sum[i] = sum[i - 1] + a[i]<br>
$$</p>
<p>######## 二维</p>
<p>$$<br>
sum[i][j] = a[i][j] + sum[i - 1][j] + sum[i][j - 1] - sum[i - 1][j - 1]<br>
$$</p>
<p>######## 树上前缀和</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>点权</p>
</li>
</ul>
<p>$$<br>
x\rightarrow y 的路径 = sum_x + sum_y - sum_{lca} - sum_{f_{alca}}<br>
$$</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>边权</p>
</li>
</ul>
<p>$$<br>
x \rightarrow y 的路径 = sum_x + sum_y - 2 * sum_{lca}<br>
$$</p>
<h6 id="差分">差分</h6>
<blockquote>
<p>用于快速解决区间修改问题</p>
</blockquote>
<p>######## 一维</p>
<p>$$<br>
b_i = a_i - a_{i - 1}<br>
$$</p>
<p>如果存在 [l, r] 区间内的值进行范围修改,在差分数组上面 $b_l + d,b_{r + 1} - d$</p>
<p>######## 二维</p>
<p>$$<br>
diff[i][j] = a[i][j] - a[i - 1][j] - a[i][j - 1] + a[i - 1][j - 1]<br>
$$</p>
<p>$$<br>
a[i][j] = \sum_{t1 = 1}^{i}\sum_{t2 = 1}^{j} diff[t1][t2]<br>
$$</p>
<p>######## 树上差分</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>点差分</p>
</li>
</ul>
<blockquote>
<p>如查询一棵树上 节点被访问的次数</p>
</blockquote>
<p>Ex:  s 到 t 路径节点的访问修改<br>
$$<br>
d_s = d_s + 1 \<br>
d_{lca} = d_{lca} - 1\<br>
d_t = d_t + 1\<br>
d_{f(lca)} = d_{f(lca)} - 1<br>
$$<br>
当前节点的权重,由于当前节点的权重与子节点有关，便可以很好的解释 上面这个差分访问修改<br>
$$<br>
a[i] = \sum^{i的子节点}diff[t]<br>
$$</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>边差分</p>
</li>
</ul>
<p>Ex:  s 到 t 路径的边的访问修改<br>
$$<br>
d_s = d_s + 1\<br>
d_t = d_t + 1\<br>
d_{lca} = d_{lca} - 1<br>
$$<br>
当前节点的权重,由于当前节点的权重与子节点有关，便可以很好的解释 上面这个差分访问修改<br>
$$<br>
a[i] = \sum^{i的子节点}diff[t]<br>
$$</p>
<h4 id="线段树">线段树</h4>
<h6 id="基础线段树">基础线段树</h6>
<blockquote>
<p>懒更新的意义是，如果这个大区间进行了修改，当访问到这个大区间的子区间时我们再去下发大区间的修改信息。</p>
</blockquote>
<p>######## 区间查询，区间变化，区间重置</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line">#<span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> fr first</span></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> sc second</span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> sum[<span class="number">4</span> * N];</span><br><span class="line"><span class="type">int</span> ad[<span class="number">4</span> * N];</span><br><span class="line"><span class="type">int</span> a[N];</span><br><span class="line"><span class="type">int</span> change[<span class="number">4</span> *N];</span><br><span class="line"><span class="type">bool</span> vis[<span class="number">4</span> * N];</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  区间查询，区间变化，区间重置</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">build</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> i)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(l == r)&#123;</span><br><span class="line">	   sum[i] = a[r];</span><br><span class="line">	   <span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> mod = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">	<span class="built_in">build</span>(l, mod, i &lt;&lt; <span class="number">1</span>);</span><br><span class="line">	<span class="built_in">build</span>(mod + <span class="number">1</span>, r, i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>);</span><br><span class="line">	sum[i] = sum[i &lt;&lt; <span class="number">1</span>] + sum[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>];</span><br><span class="line">	ad[i] = <span class="number">0</span>;</span><br><span class="line">	change[i] = <span class="number">0</span>;</span><br><span class="line">	vis[i] = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">down</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> ln, <span class="type">int</span> rn)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(vis[i])&#123;</span><br><span class="line">	  sum[i &lt;&lt; <span class="number">1</span>] = change[i] * ln;</span><br><span class="line">	  change[i &lt;&lt; <span class="number">1</span>] = change[i];</span><br><span class="line">	  vis[i &lt;&lt; <span class="number">1</span>] = <span class="literal">true</span>;</span><br><span class="line">	  sum[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] = change[i] * rn; 	</span><br><span class="line">	  change[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] = change[i];</span><br><span class="line">	  vis[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] = <span class="literal">true</span>;</span><br><span class="line">	  vis[i] = <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(ad[i] != <span class="number">0</span>)&#123;</span><br><span class="line">		sum[i &lt;&lt; <span class="number">1</span>] += (ln * ad[i]);</span><br><span class="line">		ad[i &lt;&lt; <span class="number">1</span>] += ad[i];</span><br><span class="line">		sum[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] += (rn * ad[i]);</span><br><span class="line">		ad[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] += ad[i];</span><br><span class="line">		ad[i] = <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> wol, <span class="type">int</span> wor, <span class="type">int</span> wov, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> i)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(l &gt;= wol &amp;&amp; r &lt;= wor)&#123;</span><br><span class="line">		sum[i] += (r - l + <span class="number">1</span>) * wov;</span><br><span class="line">		ad[i] += wov;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	  l -&gt; mid mid + 1-&gt; r</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="built_in">down</span>(i, (mid - l + <span class="number">1</span>), (r - mid));</span><br><span class="line">	<span class="keyword">if</span>(wol &lt;= mid)&#123;</span><br><span class="line">		<span class="built_in">add</span>(wol, wor, wov, l, mid, i &lt;&lt; <span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(wor &gt;= mid + <span class="number">1</span>)&#123;</span><br><span class="line">		<span class="built_in">add</span>(wol, wor, wov, mid + <span class="number">1</span>, r, i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	sum[i] = sum[i &lt;&lt; <span class="number">1</span>] + sum[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">cha</span><span class="params">(<span class="type">int</span> wol, <span class="type">int</span> wor, <span class="type">int</span> wov, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> i)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(l &gt;= wol &amp;&amp; r &lt;= wor)&#123;</span><br><span class="line">		sum[i] = (r - l + <span class="number">1</span>) * wov;</span><br><span class="line">	    change[i] = wov;</span><br><span class="line">	    vis[i] = <span class="literal">true</span>;</span><br><span class="line">	    <span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">	<span class="built_in">down</span>(i, (mid - l + <span class="number">1</span>), (r - mid));</span><br><span class="line">	<span class="keyword">if</span>(wol &lt;= mid)&#123;</span><br><span class="line">		<span class="built_in">cha</span>(wol, wor, wov, l, mid, i &lt;&lt; <span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(wor &gt;= mid + <span class="number">1</span>)&#123;</span><br><span class="line">		<span class="built_in">cha</span>(wol, wor, wov, mid + <span class="number">1</span>, r, i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	sum[i] = sum[i &lt;&lt; <span class="number">1</span>] + sum[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">query</span><span class="params">(<span class="type">int</span> wol, <span class="type">int</span> wor, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> i)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(wol &lt;= l &amp;&amp; r &lt;= wor)&#123;</span><br><span class="line">		<span class="keyword">return</span> sum[i];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">	<span class="built_in">down</span>(i, (mid - l + <span class="number">1</span>), (r - mid));</span><br><span class="line">	<span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">if</span>(wol &lt;= mid)&#123;</span><br><span class="line">		ans += <span class="built_in">query</span>(wol, wor, l, mid, i &lt;&lt; <span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(wor &gt;= mid + <span class="number">1</span>)&#123;</span><br><span class="line">		ans += <span class="built_in">query</span>(wol, wor, mid + <span class="number">1</span>, r, i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	  1 1 1 1 6</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">       <span class="type">int</span> n;</span><br><span class="line">       cin &gt;&gt; n;</span><br><span class="line">       <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) cin &gt;&gt; a[i];</span><br><span class="line">       <span class="built_in">build</span>(<span class="number">1</span>, n, <span class="number">1</span>);</span><br><span class="line">       <span class="type">int</span> q1,q2;</span><br><span class="line">       cin &gt;&gt; q1;</span><br><span class="line">       <span class="keyword">while</span>(q1--)&#123;</span><br><span class="line">       	<span class="type">int</span> t1, t2, t3;</span><br><span class="line">       	cin &gt;&gt; t1 &gt;&gt; t2 &gt;&gt; t3;</span><br><span class="line">       	<span class="built_in">add</span>(t1, t2, t3,<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="type">int</span> chl, chr, chv;</span><br><span class="line">       cin &gt;&gt; chl &gt;&gt; chr &gt;&gt; chv;</span><br><span class="line">       <span class="built_in">cha</span>(chl, chr, chv, <span class="number">1</span>, n, <span class="number">1</span>);</span><br><span class="line">       cin &gt;&gt; q2;</span><br><span class="line">       <span class="keyword">while</span>(q2--)&#123;</span><br><span class="line">       	<span class="type">int</span> l,r;</span><br><span class="line">       	cin &gt;&gt; l &gt;&gt; r;</span><br><span class="line">       	cout &lt;&lt; <span class="built_in">query</span>(l , r, <span class="number">1</span>, n, <span class="number">1</span>) &lt;&lt; endl; </span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>######## 区间重置 + 范围查询</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line">#<span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> PII pair<span class="string">&lt;int,int&gt;</span></span></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> fr first</span></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> sc second</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  范围重置 + 范围查询（线段树）</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> Max[<span class="number">4</span> * N]; <span class="comment">// 需要 4 * N</span></span><br><span class="line"><span class="type">int</span> a[N];</span><br><span class="line"><span class="comment">// 懒更新 (访问才往下推)</span></span><br><span class="line"><span class="type">int</span> change[<span class="number">4</span> * N];</span><br><span class="line"><span class="type">bool</span> update[<span class="number">4</span> * N];</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  ad 表示当前需要下发的信息，当前节点已经修正</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// O(n)</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">build</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> i)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(l == r)&#123;</span><br><span class="line">		Max[i] = a[r];</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>; <span class="comment">// 最后一定会达到相等，不会出现越界情况</span></span><br><span class="line">	<span class="built_in">build</span>(l, mid, i &lt;&lt; <span class="number">1</span>);</span><br><span class="line">	<span class="built_in">build</span>(mid + <span class="number">1</span>, r, i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>);</span><br><span class="line">	Max[i] =<span class="built_in">max</span>( Max[i &lt;&lt; <span class="number">1</span>],Max[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>]);</span><br><span class="line">	change[i] = <span class="number">0</span>, update[i] = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 懒信息下发</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">down</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> ln, <span class="type">int</span> rn)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(update[i])&#123;</span><br><span class="line">		update[i &lt;&lt; <span class="number">1</span>] = <span class="literal">true</span>;</span><br><span class="line">		change[i &lt;&lt; <span class="number">1</span>] = change[i];</span><br><span class="line">		Max[i &lt;&lt; <span class="number">1</span>] = change[i];</span><br><span class="line">		update[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] = <span class="literal">true</span>;</span><br><span class="line">		change[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] = change[i]; </span><br><span class="line">		Max[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] = change[i];</span><br><span class="line">		update[i] = <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// O(nlog(n)) 范围查询</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">query</span><span class="params">(<span class="type">int</span> wol, <span class="type">int</span> wor, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> i)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(l &gt;= wol &amp;&amp; r &lt;= wor)&#123;</span><br><span class="line">	   <span class="keyword">return</span> Max[i];	</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">	<span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">	<span class="built_in">down</span>(i, mid - l + <span class="number">1</span>, r - mid);</span><br><span class="line">	<span class="keyword">if</span>(mid &gt;=wol)&#123;</span><br><span class="line">		ans =<span class="built_in">max</span>(ans,<span class="built_in">query</span>(wol, wor, l, mid, i &lt;&lt; <span class="number">1</span>));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(mid + <span class="number">1</span>&lt;= wor)&#123;</span><br><span class="line">		ans = <span class="built_in">max</span>(ans,<span class="built_in">query</span>(wol, wor, mid + <span class="number">1</span>, r, i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 范围i增加</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">up</span><span class="params">(<span class="type">int</span> wol, <span class="type">int</span> wor, <span class="type">int</span> wov, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> i)</span></span>&#123;</span><br><span class="line">   	<span class="keyword">if</span>(wol &lt;=  l &amp;&amp; r &lt;= wor)&#123;</span><br><span class="line">   		change[i] = wov;</span><br><span class="line">   		update[i] = <span class="literal">true</span>;</span><br><span class="line">   		Max[i] = wov; </span><br><span class="line">   		<span class="keyword">return</span>;</span><br><span class="line">   	&#125;</span><br><span class="line">   	<span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">   	<span class="built_in">down</span>(i, mid - l + <span class="number">1</span>, r - mid);</span><br><span class="line">   	<span class="keyword">if</span>(wol &lt;= mid)&#123;</span><br><span class="line">   		<span class="built_in">up</span>(wol, wor, wov, l, mid, i &lt;&lt; <span class="number">1</span>);</span><br><span class="line">   	&#125;</span><br><span class="line">   	<span class="keyword">if</span>(wor &gt;= mid + <span class="number">1</span>)&#123;</span><br><span class="line">   		<span class="built_in">up</span>(wol, wor, wov, mid + <span class="number">1</span>, r, i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>);</span><br><span class="line">   	&#125;</span><br><span class="line">   	Max[i] = <span class="built_in">max</span>(Max[i &lt;&lt; <span class="number">1</span>], Max[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>]);</span><br><span class="line">   	<span class="comment">// cout &lt;&lt; i &lt;&lt; &quot; &quot; &lt;&lt; Max[i] &lt;&lt; endl;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="type">int</span> n;</span><br><span class="line">       cin &gt;&gt; n;</span><br><span class="line">       <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) cin &gt;&gt; a[i];</span><br><span class="line">       <span class="built_in">build</span>(<span class="number">1</span>, n, <span class="number">1</span>);</span><br><span class="line">       <span class="type">int</span> q1;</span><br><span class="line">       cin &gt;&gt; q1;</span><br><span class="line">       <span class="keyword">while</span>(q1--)&#123;</span><br><span class="line">       	<span class="type">int</span> l, r, v;</span><br><span class="line">       	cin &gt;&gt; l &gt;&gt; r &gt;&gt; v;</span><br><span class="line">       	<span class="built_in">up</span>(l, r, v, <span class="number">1</span>, n, <span class="number">1</span>);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="type">int</span> q;</span><br><span class="line">       cin &gt;&gt; q;</span><br><span class="line">       <span class="keyword">while</span>(q --)&#123;</span><br><span class="line">       	<span class="type">int</span> l, r;</span><br><span class="line">       	cin &gt;&gt; l &gt;&gt; r;</span><br><span class="line">       	cout &lt;&lt; <span class="built_in">query</span>(l, r, <span class="number">1</span>, n, <span class="number">1</span>) &lt;&lt; endl;</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>######## 范围修改 + 范围查询</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">#<span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> PII pair<span class="string">&lt;int,int&gt;</span></span></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> fr first</span></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> sc second</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  范围修改 + 范围查询（线段树）</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> sum[<span class="number">4</span> * N]; <span class="comment">// 需要 4 * N</span></span><br><span class="line"><span class="type">int</span> a[N];</span><br><span class="line"><span class="type">int</span> ad[<span class="number">4</span> * N]; <span class="comment">// 懒更新 (访问才往下推)</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  ad 表示当前需要下发的信息，当前节点已经修正</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// O(n)</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">build</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> i)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(l == r)&#123;</span><br><span class="line">		sum[i] = a[r];</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>; <span class="comment">// 最后一定会达到相等，不会出现越界情况</span></span><br><span class="line">	<span class="built_in">build</span>(l, mid, i &lt;&lt; <span class="number">1</span>);</span><br><span class="line">	<span class="built_in">build</span>(mid + <span class="number">1</span>, r, i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>);</span><br><span class="line">	sum[i] = sum[i &lt;&lt; <span class="number">1</span>] + sum[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>];</span><br><span class="line">	ad[i] = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 懒信息下发</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">down</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> ln, <span class="type">int</span> rn)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(ad[i] != <span class="number">0</span>)&#123;</span><br><span class="line">		sum[i &lt;&lt; <span class="number">1</span>] += ln * ad[i];</span><br><span class="line">		ad[i &lt;&lt; <span class="number">1</span>] += ad[i];</span><br><span class="line">		sum[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] += rn * ad[i];</span><br><span class="line">		ad[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] += ad[i];</span><br><span class="line">		ad[i] = <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// O(nlog(n)) 范围查询</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">query</span><span class="params">(<span class="type">int</span> wol, <span class="type">int</span> wor, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> i)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(l &gt;= wol &amp;&amp; r &lt;= wor)&#123;</span><br><span class="line">	   <span class="keyword">return</span> sum[i];	</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">	<span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">	<span class="built_in">down</span>(i, mid - l + <span class="number">1</span>, r - mid);</span><br><span class="line">	<span class="keyword">if</span>(mid &gt;=wol)&#123;</span><br><span class="line">		ans += <span class="built_in">query</span>(wol, wor, l, mid, i &lt;&lt; <span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(mid + <span class="number">1</span>&lt;= wor)&#123;</span><br><span class="line">		ans += <span class="built_in">query</span>(wol, wor, mid + <span class="number">1</span>, r, i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 范围i增加</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">(<span class="type">int</span> wol, <span class="type">int</span> wor, <span class="type">int</span> wov, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> i)</span></span>&#123;</span><br><span class="line">   	<span class="keyword">if</span>(wol &lt;=  l &amp;&amp; r &lt;= wor)&#123;</span><br><span class="line">   		ad[i] += wov; <span class="comment">// 往下传递</span></span><br><span class="line">   		sum[i] += wov*(r - l + <span class="number">1</span>); </span><br><span class="line">   		<span class="keyword">return</span>;</span><br><span class="line">   	&#125;</span><br><span class="line">   	<span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">   	<span class="built_in">down</span>(i, mid - l + <span class="number">1</span>, r - mid);</span><br><span class="line">   	<span class="keyword">if</span>(wol &lt;= mid)&#123;</span><br><span class="line">   		<span class="built_in">add</span>(wol, wor, wov, l, mid, i &lt;&lt; <span class="number">1</span>);</span><br><span class="line">   	&#125;</span><br><span class="line">   	<span class="keyword">if</span>(wor &gt;= mid + <span class="number">1</span>)&#123;</span><br><span class="line">   		<span class="built_in">add</span>(wol, wor, wov, mid + <span class="number">1</span>, r, i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>);</span><br><span class="line">   	&#125;</span><br><span class="line">   	sum[i] = sum[i &lt;&lt; <span class="number">1</span>] + sum[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="type">int</span> n;</span><br><span class="line">       cin &gt;&gt; n;</span><br><span class="line">       <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) cin &gt;&gt; a[i];</span><br><span class="line">       <span class="built_in">build</span>(<span class="number">1</span>, n, <span class="number">1</span>);</span><br><span class="line">       <span class="type">int</span> q1;</span><br><span class="line">       cin &gt;&gt; q1;</span><br><span class="line">       <span class="keyword">while</span>(q1--)&#123;</span><br><span class="line">       	<span class="type">int</span> l, r, v;</span><br><span class="line">       	cin &gt;&gt; l &gt;&gt; r &gt;&gt; v;</span><br><span class="line">       	<span class="built_in">add</span>(l, r, v, <span class="number">1</span>, n, <span class="number">1</span>);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="type">int</span> q;</span><br><span class="line">       cin &gt;&gt; q;</span><br><span class="line">       <span class="keyword">while</span>(q --)&#123;</span><br><span class="line">       	<span class="type">int</span> l, r;</span><br><span class="line">       	cin &gt;&gt; l &gt;&gt; r;</span><br><span class="line">       	cout &lt;&lt; <span class="built_in">query</span>(l, r, <span class="number">1</span>, n, <span class="number">1</span>) &lt;&lt; endl;</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>######## 线段树的势能分析</p>
<p>######## 线段树区间合并</p>
<blockquote>
<p>处理 子串 子数组(相互连接) 的信息</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p><a target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/P2572">序列操作</a></p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br></pre></td><td class="code"><pre><span class="line">#<span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> int long long </span></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> fr first</span></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> sc second</span></span><br><span class="line"><span class="keyword">using</span> PII = pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a[N];</span><br><span class="line"><span class="type">int</span> sum[N &lt;&lt; <span class="number">2</span>];</span><br><span class="line"><span class="type">int</span> tree0[N &lt;&lt; <span class="number">2</span>];</span><br><span class="line"><span class="type">int</span> pre0[N &lt;&lt; <span class="number">2</span>];</span><br><span class="line"><span class="type">int</span> la0[N &lt;&lt; <span class="number">2</span>];</span><br><span class="line"><span class="type">int</span> tree1[N &lt;&lt; <span class="number">2</span>];</span><br><span class="line"><span class="type">int</span> pre1[N &lt;&lt; <span class="number">2</span>];</span><br><span class="line"><span class="type">int</span> la1[N &lt;&lt; <span class="number">2</span>];</span><br><span class="line"><span class="type">bool</span> update[N &lt;&lt; <span class="number">2</span>];</span><br><span class="line"><span class="type">int</span> up_data[N &lt;&lt; <span class="number">2</span>];</span><br><span class="line"><span class="type">bool</span> reversed[N &lt;&lt; <span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">up</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> ln, <span class="type">int</span> rn)</span> </span>&#123;</span><br><span class="line">    pre0[i] = (pre0[i &lt;&lt; <span class="number">1</span>] == ln) ? (pre0[i &lt;&lt; <span class="number">1</span>] + pre0[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>]) : pre0[i &lt;&lt; <span class="number">1</span>];</span><br><span class="line">    pre1[i] = (pre1[i &lt;&lt; <span class="number">1</span>] == ln) ? (pre1[i &lt;&lt; <span class="number">1</span>] + pre1[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>]) : pre1[i &lt;&lt; <span class="number">1</span>];</span><br><span class="line">    la0[i] = (pre0[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] == rn) ? (la0[i &lt;&lt; <span class="number">1</span>] + pre0[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>]) : la0[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>];</span><br><span class="line">    la1[i] = (pre1[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] == rn) ? (la1[i &lt;&lt; <span class="number">1</span>] + pre1[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>]) : la1[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>];</span><br><span class="line">    tree0[i] = <span class="built_in">max</span>(&#123;tree0[i &lt;&lt; <span class="number">1</span>], tree0[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>], la0[i &lt;&lt; <span class="number">1</span>] + pre0[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>]&#125;);</span><br><span class="line">    tree1[i] = <span class="built_in">max</span>(&#123;tree1[i &lt;&lt; <span class="number">1</span>], tree1[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>], la1[i &lt;&lt; <span class="number">1</span>] + pre1[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>]&#125;);</span><br><span class="line">    sum[i] = sum[i &lt;&lt; <span class="number">1</span>] + sum[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">build</span><span class="params">(<span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> i)</span> </span>&#123;</span><br><span class="line">    reversed[i] = <span class="literal">false</span>;</span><br><span class="line">    update[i] = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (l == r) &#123;</span><br><span class="line">        tree0[i] = (a[r] == <span class="number">0</span>) ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">        tree1[i] = (a[r] == <span class="number">1</span>) ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">        sum[i] = a[r];</span><br><span class="line">        la0[i] = pre0[i] = tree0[i];</span><br><span class="line">        la1[i] = pre1[i] = tree1[i];</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> mid = (r + l) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">build</span>(l, mid, i &lt;&lt; <span class="number">1</span>);</span><br><span class="line">    <span class="built_in">build</span>(mid + <span class="number">1</span>, r, (i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>));</span><br><span class="line">    <span class="built_in">up</span>(i, mid - l + <span class="number">1</span>, r - mid);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">down</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> ln, <span class="type">int</span> rn)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (update[i]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (up_data[i] == <span class="number">1</span>) &#123;</span><br><span class="line">            pre1[i &lt;&lt; <span class="number">1</span>] = la1[i &lt;&lt; <span class="number">1</span>] = tree1[i &lt;&lt; <span class="number">1</span>] = ln;</span><br><span class="line">            pre0[i &lt;&lt; <span class="number">1</span>] = la0[i &lt;&lt; <span class="number">1</span>] = tree0[i &lt;&lt; <span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">            pre1[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] = la1[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] = tree1[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] = rn;</span><br><span class="line">            pre0[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] = la0[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] = tree0[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">            sum[i &lt;&lt; <span class="number">1</span>] = ln;</span><br><span class="line">            sum[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] = rn;</span><br><span class="line">            update[i] = <span class="literal">false</span>;</span><br><span class="line">            update[i &lt;&lt; <span class="number">1</span>] = update[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] = <span class="literal">true</span>;</span><br><span class="line">            up_data[i &lt;&lt; <span class="number">1</span>] = up_data[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            pre0[i &lt;&lt; <span class="number">1</span>] = la0[i &lt;&lt; <span class="number">1</span>] = tree0[i &lt;&lt; <span class="number">1</span>] = ln;</span><br><span class="line">            pre1[i &lt;&lt; <span class="number">1</span>] = la1[i &lt;&lt; <span class="number">1</span>] = tree1[i &lt;&lt; <span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">            pre0[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] = la0[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] = tree0[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] = rn;</span><br><span class="line">            pre1[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] = la1[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] = tree1[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">            sum[i &lt;&lt; <span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">            sum[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">            update[i] = <span class="literal">false</span>;</span><br><span class="line">            update[i &lt;&lt; <span class="number">1</span>] = update[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] = <span class="literal">true</span>;</span><br><span class="line">            up_data[i &lt;&lt; <span class="number">1</span>] = up_data[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        reversed[i &lt;&lt; <span class="number">1</span>] = reversed[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (reversed[i]) &#123;</span><br><span class="line">        <span class="built_in">swap</span>(pre1[i &lt;&lt; <span class="number">1</span>], pre0[i &lt;&lt; <span class="number">1</span>]);</span><br><span class="line">        <span class="built_in">swap</span>(la1[i &lt;&lt; <span class="number">1</span>], la0[i &lt;&lt; <span class="number">1</span>]);</span><br><span class="line">        <span class="built_in">swap</span>(tree0[i &lt;&lt; <span class="number">1</span>], tree1[i &lt;&lt; <span class="number">1</span>]);</span><br><span class="line">        <span class="built_in">swap</span>(pre1[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>], pre0[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>]);</span><br><span class="line">        <span class="built_in">swap</span>(la1[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>], la0[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>]);</span><br><span class="line">        <span class="built_in">swap</span>(tree0[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>], tree1[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>]);</span><br><span class="line">        sum[i &lt;&lt; <span class="number">1</span>] = ln - sum[i &lt;&lt; <span class="number">1</span>];</span><br><span class="line">        sum[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] = rn - sum[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>];</span><br><span class="line">        reversed[i &lt;&lt; <span class="number">1</span>] = !reversed[i &lt;&lt; <span class="number">1</span>];</span><br><span class="line">        reversed[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>] = !reversed[i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>];</span><br><span class="line">        reversed[i] = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">change</span><span class="params">(<span class="type">int</span> jobl, <span class="type">int</span> jobr, <span class="type">int</span> w, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> i)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (jobl &lt;= l &amp;&amp; r &lt;= jobr) &#123;</span><br><span class="line">        <span class="keyword">if</span> (w == <span class="number">0</span>) &#123;</span><br><span class="line">            pre0[i] = la0[i] = tree0[i] = (r - l + <span class="number">1</span>);</span><br><span class="line">            sum[i] = <span class="number">0</span>;</span><br><span class="line">            pre1[i] = la1[i] = tree1[i] = <span class="number">0</span>;</span><br><span class="line">            update[i] = <span class="literal">true</span>;</span><br><span class="line">            up_data[i] = w;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            pre1[i] = la1[i] = tree1[i] = (r - l + <span class="number">1</span>);</span><br><span class="line">            sum[i] = (r - l + <span class="number">1</span>);</span><br><span class="line">            pre0[i] = la0[i] = tree0[i] = <span class="number">0</span>;</span><br><span class="line">            update[i] = <span class="literal">true</span>;</span><br><span class="line">            up_data[i] = w;</span><br><span class="line">        &#125;</span><br><span class="line">        reversed[i] = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">down</span>(i, mid - l + <span class="number">1</span>, r - mid);</span><br><span class="line">    <span class="keyword">if</span> (jobl &lt;= mid) &#123;</span><br><span class="line">        <span class="built_in">change</span>(jobl, jobr, w, l, mid, i &lt;&lt; <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (jobr &gt;= mid + <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">change</span>(jobl, jobr, w, mid + <span class="number">1</span>, r, i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">up</span>(i, mid - l + <span class="number">1</span>, r - mid);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">query1</span><span class="params">(<span class="type">int</span> jobl, <span class="type">int</span> jobr, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> i)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (jobl &lt;= l &amp;&amp; r &lt;= jobr) &#123;</span><br><span class="line">        <span class="keyword">return</span> sum[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">down</span>(i, mid - l + <span class="number">1</span>, r - mid);</span><br><span class="line">    <span class="keyword">if</span> (jobl &lt;= mid) &#123;</span><br><span class="line">        ans += <span class="built_in">query1</span>(jobl, jobr, l, mid, i &lt;&lt; <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (jobr &gt;= mid + <span class="number">1</span>) &#123;</span><br><span class="line">        ans += <span class="built_in">query1</span>(jobl, jobr, mid + <span class="number">1</span>, r, i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//  返回 [l, r] 范围上 被 [jobl, jobr] 影响的区域 的 信息</span></span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">query2</span><span class="params">(<span class="type">int</span> jobl, <span class="type">int</span> jobr, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> i)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (jobl &lt;= l &amp;&amp; r &lt;= jobr) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;tree1[i], pre1[i], la1[i]&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">down</span>(i, mid - l + <span class="number">1</span>, r - mid);</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; a1 = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; a2 = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">if</span> (jobl &lt;= mid) &#123;</span><br><span class="line">        a1 = <span class="built_in">query2</span>(jobl, jobr, l, mid, i &lt;&lt; <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (jobr &gt;= mid + <span class="number">1</span>) &#123;</span><br><span class="line">        a2 = <span class="built_in">query2</span>(jobl, jobr, mid + <span class="number">1</span>, r, i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> max_len = <span class="built_in">max</span>(a1[<span class="number">0</span>], a2[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">if</span> (jobl &lt;= mid &amp;&amp; jobr &gt;= mid + <span class="number">1</span>) &#123;</span><br><span class="line">        max_len = <span class="built_in">max</span>(max_len, a1[<span class="number">2</span>] + a2[<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> prefix_len = (jobl &lt;= l) ? a1[<span class="number">1</span>] : <span class="number">0</span>;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">      [l, r]</span></span><br><span class="line"><span class="comment">      [jobl,jobr]</span></span><br><span class="line"><span class="comment">      返回 [l, r] 范围上 被 [jobl, jobr] 影响的区域 的 信息</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">if</span> (jobl &lt;= l &amp;&amp; a1[<span class="number">1</span>] == (mid - l + <span class="number">1</span>) &amp;&amp; jobr &gt;= mid + <span class="number">1</span>) &#123;</span><br><span class="line">        prefix_len += a2[<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> suffix_len = (jobr &gt;= r) ? a2[<span class="number">2</span>] : <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (jobr &gt;= r &amp;&amp; a2[<span class="number">1</span>] == (r - mid) &amp;&amp; jobl &lt;= mid) &#123;</span><br><span class="line">        suffix_len += a1[<span class="number">2</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;max_len, prefix_len, suffix_len&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">reverse</span><span class="params">(<span class="type">int</span> jobl, <span class="type">int</span> jobr, <span class="type">int</span> l, <span class="type">int</span> r, <span class="type">int</span> i)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (jobl &lt;= l &amp;&amp; r &lt;= jobr) &#123;</span><br><span class="line">        reversed[i] = !reversed[i];</span><br><span class="line">        <span class="built_in">swap</span>(pre1[i], pre0[i]);</span><br><span class="line">        <span class="built_in">swap</span>(la1[i], la0[i]);</span><br><span class="line">        <span class="built_in">swap</span>(tree0[i], tree1[i]);</span><br><span class="line">        sum[i] = (r - l + <span class="number">1</span>) - sum[i];</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">down</span>(i, mid - l + <span class="number">1</span>, r - mid);</span><br><span class="line">    <span class="keyword">if</span> (jobl &lt;= mid) &#123;</span><br><span class="line">        <span class="built_in">reverse</span>(jobl, jobr, l, mid, i &lt;&lt; <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (jobr &gt;= mid + <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">reverse</span>(jobl, jobr, mid + <span class="number">1</span>, r, i &lt;&lt; <span class="number">1</span> | <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">up</span>(i, mid - l + <span class="number">1</span>, r - mid);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n, m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) cin &gt;&gt; a[i];</span><br><span class="line">    <span class="built_in">build</span>(<span class="number">1</span>, n, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">while</span> (m--) &#123;</span><br><span class="line">        <span class="type">int</span> pos, l, r;</span><br><span class="line">        cin &gt;&gt; pos &gt;&gt; l &gt;&gt; r;</span><br><span class="line">        l++; r++;</span><br><span class="line">        <span class="keyword">if</span> (pos == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="built_in">change</span>(l, r, <span class="number">0</span>, <span class="number">1</span>, n, <span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pos == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="built_in">change</span>(l, r, <span class="number">1</span>, <span class="number">1</span>, n, <span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pos == <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="built_in">reverse</span>(l, r, <span class="number">1</span>, n, <span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pos == <span class="number">3</span>) &#123;</span><br><span class="line">            cout &lt;&lt; <span class="built_in">query1</span>(l, r, <span class="number">1</span>, n, <span class="number">1</span>) &lt;&lt; endl;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pos == <span class="number">4</span>) &#123;</span><br><span class="line">            cout &lt;&lt; <span class="built_in">query2</span>(l, r, <span class="number">1</span>, n, <span class="number">1</span>)[<span class="number">0</span>] &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h6 id="开点线段树">开点线段树</h6>
<ol>
<li class="lvl-3">
<p>问题</p>
</li>
</ol>
<ul class="lvl-0">
<li class="lvl-2">
<p>支持很大的范围，但是查询次数少，查询区间小</p>
</li>
</ul>
<blockquote>
<p>时间复杂度 2 * m * log(n)，用 cnt 来记录编号，看节点分支是否访问过。</p>
</blockquote>
<h6 id="线段树历史最值操作">线段树历史最值操作</h6>
<blockquote>
<p>标签回收 → 进行剪枝</p>
</blockquote>
<h2 id="图论">图论</h2>
<h4 id="最短路问题">最短路问题</h4>
<blockquote>
<p>遇见过很多 最短路 问题，题目的意思一般都指向明确，就是(i $\rightarrow$ j)的路径最小。</p>
</blockquote>
<blockquote class="alert alert-note">
<p>但是一般都是 <strong>最短路的扩展</strong>， ex：到达终点时候需要满足什么样的状态</p>
</blockquote>
<p>题目链接：</p>
<ul class="lvl-0">
<li class="lvl-2">
<p><a target="_blank" rel="noopener" href="https://acm.hdu.edu.cn/contest/problem?cid=1159&amp;pid=1006">扩展迷宫问题</a></p>
</li>
</ul>
<blockquote>
<p>个人认为这道题非常的典，题中还应用了一类 <strong>自定义点</strong>，来管理相同类别的点之间的跳转。</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">#<span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> int long long</span></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> fr first</span></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> sc second</span></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="keyword">using</span> PII = pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">slove</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="type">int</span> n, m, x;</span><br><span class="line">cin &gt;&gt; n &gt;&gt; m &gt;&gt; x;</span><br><span class="line"><span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n + <span class="number">1</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">vector&lt;array&lt;<span class="type">int</span>, 3&gt;&gt; g[<span class="number">2</span> * n + <span class="number">1</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) cin &gt;&gt; a[i];</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)&#123;</span><br><span class="line">	g[a[i] + n].<span class="built_in">push_back</span>(&#123;i,<span class="number">0</span>,<span class="number">0</span>&#125;);</span><br><span class="line">	g[i].<span class="built_in">push_back</span>(&#123;a[i] + n, x, <span class="number">1</span> &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++)&#123;</span><br><span class="line">	<span class="type">int</span> u, v, w;</span><br><span class="line">	cin &gt;&gt; u &gt;&gt; v &gt;&gt; w;</span><br><span class="line">	g[u].<span class="built_in">push_back</span>(&#123;v,w,<span class="number">1</span>&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">priority_queue&lt; array&lt;<span class="type">int</span>,3&gt;, vector&lt;array&lt;<span class="type">int</span>,3&gt;&gt;, greater&lt;array&lt;<span class="type">int</span>,3&gt;&gt;&gt; q;</span><br><span class="line">q.<span class="built_in">push</span>(&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>&#125;);</span><br><span class="line">vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">dist</span>(<span class="number">2</span> * n + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(<span class="number">3</span>, INT_MAX));</span><br><span class="line">vector&lt;vector&lt;<span class="type">bool</span>&gt;&gt; <span class="built_in">vis</span>(<span class="number">2</span> * n + <span class="number">1</span>,<span class="built_in">vector</span>&lt;<span class="type">bool</span>&gt;(<span class="number">3</span>,<span class="literal">false</span>));</span><br><span class="line">dist[<span class="number">1</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(!q.<span class="built_in">empty</span>())&#123;</span><br><span class="line">	<span class="keyword">auto</span> temp = q.<span class="built_in">top</span>();</span><br><span class="line">	q.<span class="built_in">pop</span>();</span><br><span class="line">	<span class="type">int</span> v = temp[<span class="number">1</span>],step = temp[<span class="number">2</span>];</span><br><span class="line">	<span class="keyword">if</span>(vis[v][step]) <span class="keyword">continue</span>;</span><br><span class="line">	<span class="comment">// cout &lt;&lt; v &lt;&lt; &quot; &quot; &lt;&lt; w &lt;&lt; endl;</span></span><br><span class="line">	vis[v][step] = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">auto</span>[u, w, l] : g[v])&#123;</span><br><span class="line">	<span class="comment">// cout &lt;&lt; u &lt;&lt; &quot; &quot; &lt;&lt; w &lt;&lt; endl;</span></span><br><span class="line">	<span class="type">int</span> op = (step + l) % <span class="number">3</span>;</span><br><span class="line">	<span class="keyword">if</span>(dist[u][op] &gt; dist[v][step] + w)&#123;</span><br><span class="line">		dist[u][op] = dist[v][step] + w;</span><br><span class="line">		q.<span class="built_in">push</span>(&#123;dist[u][op],u, op&#125;);&#125;&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(dist[n][<span class="number">0</span>] == INT_MAX)&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;-1&quot;</span> &lt;&lt; endl;</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">	cout &lt;&lt; dist[n][<span class="number">0</span>] &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">	cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">	<span class="type">int</span> t;</span><br><span class="line">	cin &gt;&gt; t;</span><br><span class="line">	<span class="keyword">while</span>(t--) <span class="built_in">slove</span>();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="拓扑排序">拓扑排序</h4>
<blockquote>
<p>适用于那些 节点状态有先后性的问题。</p>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p>如果需要求 最大/最小的拓扑排序的话，可以将存储的 deque 改成 优先队列</p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> n;</span><br><span class="line">	cin &gt;&gt; n;</span><br><span class="line">	vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">a</span>(n + <span class="number">1</span>);</span><br><span class="line">	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">in</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">		<span class="type">int</span> u, v;</span><br><span class="line">		cin &gt;&gt; u &gt;&gt; v;</span><br><span class="line">		a[u].<span class="built_in">push_back</span>(v);</span><br><span class="line">		in[v]++;</span><br><span class="line">	&#125;</span><br><span class="line">	deque&lt;<span class="type">int</span>&gt; q;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(in[i] == <span class="number">0</span>)&#123;q.<span class="built_in">push_back</span>(i);&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">while</span>(!q.<span class="built_in">empty</span>())&#123;</span><br><span class="line">		<span class="type">int</span> x = q.<span class="built_in">front</span>(); q.<span class="built_in">pop_front</span>();</span><br><span class="line">		cout &lt;&lt; x &lt;&lt; endl;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">auto</span> t : a[x])&#123;</span><br><span class="line">			in[t]--;</span><br><span class="line">			<span class="keyword">if</span>(in[t] == <span class="number">0</span>) q.<span class="built_in">push_back</span>(t);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>板子题：<a target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/P1347">P1347</a></p>
</li>
</ul>
<h4 id="负环-差分约束">负环 差分约束</h4>
<p>形式</p>
<ol>
<li class="lvl-3">
<p>$$<br>
x_i - x_j \leq C_i \quad \text{($C_i$ 为常数)}\<br>
找到一组满足这种式子的解<br>
$$</p>
</li>
</ol>
<blockquote>
<p>根据 小于号 的不等式来建图</p>
</blockquote>
<p>$$<br>
x_i \leq x_j + C_i<br>
$$</p>
<p>将这个式子应用到 <strong>图</strong>中,如果图中存在负环就不存在满足的解。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>负环判断： 如果这个节点进队列 $\geq$ 所有节点的 个数 - 1</p>
</li>
<li class="lvl-2">
<p>如果队列为空，dist[n] 便是一组解</p>
</li>
</ul>
<h2 id="数学">数学</h2>
<h4 id="基础数论">基础数论</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>任何一个整数 都可以分解为 有限个质数的乘积</p>
</li>
</ul>
<p>$$<br>
N = p_1^{c_1} * p_2^{c_2} \dots p_x^{c_x}<br>
$$</p>
<p>则 N 的约数集合为<br>
$$<br>
约数集合 = {p_1^{b_1} * p_2 ^ {b_2} \dots p_x^{b_x}} \<br>
0\le b_i \le c_i<br>
$$<br>
正约数的个数 😒\prod_{i=1}^{m}{(c_i +1)}$</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>质数筛的算法只需要 $log{(n)}$</p>
</li>
</ul>
<h4 id="高斯消元">高斯消元</h4>
<blockquote>
<p>高斯消元 有三种类别，我们会逐一补充，目前先补充 异或消元，但是其实本质是不变的。</p>
</blockquote>
<h4 id="线性基">线性基</h4>
<blockquote>
<p>给出一个数组，请找出这个 数组的任意元素进行异或，可以得到多少种情况。</p>
<p>线性基的大小便决定了 能异或的多少种情况 （2 ^ n - 1)</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">#<span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> int long long </span></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> fr first</span></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> sc second</span></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="keyword">using</span> PII = pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt;;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  线性基</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">void</span> _1()&#123;</span><br><span class="line">	<span class="type">int</span> n;</span><br><span class="line">	cin &gt;&gt; n;</span><br><span class="line">	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n + <span class="number">1</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) cin &gt;&gt; a[i];</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	  查找每一位的 基</span></span><br><span class="line"><span class="comment">	  首先 从 每一个数 开始遍历，然后枚举 每一个位置，如果这个位置有 基，将这个数 变成 两者的异或值</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="type">int</span> h = <span class="number">61</span>;</span><br><span class="line">	<span class="type">bool</span> zero = <span class="literal">false</span>;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt; ans;</span><br><span class="line">	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">base</span><span class="params">(h + <span class="number">1</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> j = h; j &gt;= <span class="number">0</span>; j--)&#123;</span><br><span class="line">			<span class="keyword">if</span>(((a[i] &gt;&gt; j) &amp; <span class="number">1</span>) == <span class="number">1</span>)&#123;</span><br><span class="line">				<span class="keyword">if</span>(base[j] == <span class="number">0</span>)&#123;</span><br><span class="line">					base[j] = a[i];</span><br><span class="line">					ans.<span class="built_in">push_back</span>(a[i]);</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				&#125;<span class="keyword">else</span> a[i] = a[i] ^ base[j];</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(a[i] == <span class="number">0</span>) zero = <span class="literal">true</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">auto</span> x : ans) cout &lt;&lt; x &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	cout &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">if</span>(zero) cout &lt;&lt; <span class="string">&quot;yes&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;no&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>高斯消元</p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="type">void</span> _2()&#123;</span><br><span class="line">	<span class="type">int</span> n;</span><br><span class="line">	cin &gt;&gt; n;</span><br><span class="line">	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n + <span class="number">1</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) cin &gt;&gt; a[i];</span><br><span class="line">	</span><br><span class="line">	<span class="type">int</span> len = <span class="number">1</span>, h = <span class="number">61</span>; <span class="comment">// 上面是确定的</span></span><br><span class="line">	<span class="type">bool</span> zero = <span class="literal">false</span>;</span><br><span class="line">	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">base</span><span class="params">(<span class="number">1</span>,<span class="number">0</span>)</span></span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = h; i &gt;= <span class="number">0</span>; i--)&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> j = len; j &lt;= n; j++)&#123;</span><br><span class="line">			<span class="keyword">if</span>(((a[j] &gt;&gt; i) &amp; <span class="number">1</span>) == <span class="number">1</span>)&#123;</span><br><span class="line">				<span class="built_in">swap</span>(a[len],a[j]);</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(((a[len] &gt;&gt; i) &amp; <span class="number">1</span>) == <span class="number">1</span>)&#123; </span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> k = <span class="number">1</span>; k &lt;= n; k++)&#123;</span><br><span class="line">			<span class="keyword">if</span>(k != len &amp;&amp; ((a[k] &gt;&gt; i) &amp; <span class="number">1</span>) == <span class="number">1</span>)&#123;</span><br><span class="line">				a[k] = a[k] ^ a[len];</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		len++;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	len --;</span><br><span class="line">	<span class="keyword">if</span>(len != n) zero = <span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= len; i++) cout &lt;&lt; a[i] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">	cout &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">if</span>(zero) cout &lt;&lt; <span class="string">&quot;yes&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;no&quot;</span> &lt;&lt; endl;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="常见考点：">常见考点：</h6>
<p>######## <strong>求异或最大值</strong></p>
<blockquote>
<p>从 最高位开始枚举，来进行更新最大值</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">#<span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> int long long </span></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> fr first</span></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> sc second</span></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="keyword">using</span> PII = pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> n;</span><br><span class="line">	cin &gt;&gt; n;</span><br><span class="line">	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n + <span class="number">1</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) cin &gt;&gt; a[i];</span><br><span class="line">	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">base</span><span class="params">(<span class="number">53</span>,<span class="number">0</span>)</span></span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> k = <span class="number">52</span>; k &gt;= <span class="number">0</span>; k--)&#123;</span><br><span class="line">			<span class="keyword">if</span>(((a[i] &gt;&gt; k) &amp; <span class="number">1</span>) == <span class="number">1</span>)&#123;</span><br><span class="line">				<span class="keyword">if</span>(base[k] == <span class="number">0</span>)&#123;</span><br><span class="line">					base[k] = a[i];</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">					a[i] ^= base[k];</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="type">int</span> mx = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">52</span>; i &gt;= <span class="number">0</span>; i--)&#123;</span><br><span class="line">		mx = <span class="built_in">max</span>(mx, mx ^ base[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; mx &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>######## <strong>求 异或 第 k 小值</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">#<span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> int long long </span></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> fr first</span></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> sc second</span></span><br><span class="line">#<span class="meta">#<span class="keyword">define</span> endl <span class="string">&#x27;\n&#x27;</span></span></span><br><span class="line"><span class="keyword">using</span> PII = pair&lt;<span class="type">int</span>,<span class="type">int</span>&gt;;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  线性基</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">signed</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="type">int</span> n;</span><br><span class="line">	cin &gt;&gt; n;</span><br><span class="line">	<span class="function">vector&lt;<span class="type">int</span>&gt; <span class="title">a</span><span class="params">(n + <span class="number">1</span>,<span class="number">0</span>)</span></span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) cin &gt;&gt; a[i];</span><br><span class="line">	<span class="keyword">auto</span> swp = [&amp;](<span class="type">int</span> i, <span class="type">int</span> j) -&gt; <span class="type">void</span>&#123;</span><br><span class="line">		<span class="type">int</span> t = a[i];</span><br><span class="line">		a[i] = a[j];</span><br><span class="line">		a[j] = t;</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="type">int</span> len = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">53</span>; i &gt;= <span class="number">0</span>; i--)&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> j = len; j &lt;= n; j++)&#123;</span><br><span class="line">			<span class="keyword">if</span>(((a[j] &gt;&gt; i) &amp; <span class="number">1</span>) == <span class="number">1</span>)&#123;</span><br><span class="line">				<span class="built_in">swp</span>(j, len);</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(((a[len] &gt;&gt; i) &amp; <span class="number">1</span>) == <span class="number">1</span>)&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++)&#123;</span><br><span class="line">			<span class="keyword">if</span>(j != len &amp;&amp; (((a[j] &gt;&gt; i) &amp; <span class="number">1</span>) == <span class="number">1</span>))&#123;</span><br><span class="line">				a[j] ^= a[len];</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		len ++;</span><br><span class="line">	&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	len --;</span><br><span class="line">	<span class="comment">// for(int i = 1; i &lt;= len; i++) cout &lt;&lt; a[i] &lt;&lt; &quot; &quot;;</span></span><br><span class="line">	<span class="comment">// cout &lt;&lt; endl;</span></span><br><span class="line">	<span class="type">bool</span> zero = (len != n);</span><br><span class="line">	<span class="type">int</span> m;</span><br><span class="line">	cin &gt;&gt; m;</span><br><span class="line">	<span class="type">int</span> mx = (<span class="number">1</span> &lt;&lt; len);</span><br><span class="line">	<span class="comment">// cout &lt;&lt; mx &lt;&lt; endl;</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++)&#123;</span><br><span class="line">		<span class="type">int</span> t;</span><br><span class="line">		cin &gt;&gt; t;</span><br><span class="line">		<span class="keyword">if</span>(zero) t--;</span><br><span class="line">		<span class="keyword">if</span>(t == <span class="number">0</span> &amp;&amp; zero) cout &lt;&lt; <span class="string">&quot;0&quot;</span> &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(t == <span class="number">0</span> || t &gt;= mx) cout &lt;&lt; <span class="string">&quot;-1&quot;</span> &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">		<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">			<span class="comment">// cout &lt;&lt; t &lt;&lt; endl;</span></span><br><span class="line">			<span class="keyword">for</span> (<span class="type">int</span> i = len, j = <span class="number">0</span>; i &gt;= <span class="number">1</span>; i--, j++) &#123;</span><br><span class="line">			<span class="keyword">if</span> ((t &amp; (<span class="number">1L</span> &lt;&lt; j)) != <span class="number">0</span>) &#123;</span><br><span class="line">				ans ^= a[i];</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">			cout &lt;&lt; ans &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">			<span class="comment">// cout &lt;&lt; endl;</span></span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="扩展欧几里得-2">扩展欧几里得</h4>
<h6 id="中国剩余定理">中国剩余定理</h6>
<p>由扩展欧几里得算法（后续填完扩展欧几里得会补充）</p>
<h2 id="动态规划">动态规划</h2>
<h4 id="区间DP">区间DP</h4>
<blockquote>
<p>当实现 区间DP 的时候，如何将递归该迭代</p>
<ol>
<li class="lvl-3">首先<strong>枚举每一个长度的区间，然后在枚举每一个区间的开头</strong>（这样可以避免判断边界条件），然后判断这个区间的扩展，因为当你枚举到这个长度的区间的时候，你是一定枚举完这个区间的子区间的。</li>
<li class="lvl-3">注意 子区间中存在一些特判的情况！</li>
</ol>
</blockquote>
<ul class="lvl-0">
<li class="lvl-2">
<p><a target="_blank" rel="noopener" href="http://leetcode.cn/problems/predict-the-winner/submissions/626649392/">预测赢家</a></p>
</li>
</ul>
<h2 id="计算几何">计算几何</h2>
<h2 id="博弈论">博弈论</h2>
<h2 id="杂项">杂项</h2>
<h4 id="数据">数据</h4>
<blockquote>
<p>通过数据量的给出，可以大概的估计是一个什么时间复杂度的算法，从而来推演这个算法的类型。</p>
</blockquote>
<h4 id="或-和-与">或( | ) 和 与( &amp; )</h4>
<p>对于或和与的一些讨论</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>或 是只要有一个 1，或值 中这个位置就一定会存在一个 1</p>
</li>
</ul>
<p>可以考虑 这个位置的 一是否需要存在来进行按位判断</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>与 是需要全部都是1，与值 中这个位置就一定存在 1</p>
</li>
</ul>
<h4 id="最大公约数-和-最小公倍数-的关系">最大公约数 和 最小公倍数 的关系</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>预处理两个数字的最大公约数</strong></p>
</li>
</ul>
<blockquote>
<p>这个 <code>g[y][x%y]</code> 其实就相当于一个 动规的转辗相除法的一个应用</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">int</span> x = <span class="number">0</span>; x &lt; N; x ++) g[x][<span class="number">0</span>] = g[<span class="number">0</span>][x] = g[x][x] = x;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> x = <span class="number">1</span>; x &lt; N; x ++)&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> y = <span class="number">1</span>; y &lt; x; y++)&#123;</span><br><span class="line">		g[x][y] = g[y][x] = g[y][x % y];</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul class="lvl-0">
<li class="lvl-2">
<p>特殊性质对于任何正整数 a1​,a2​,…,an​ 和它们的 GCD g=gcd(a1​,a2​,…,an​)，如果我们定义一个新数组 ai′​=ai​/g，那么新数组 a1′​,a2′​,…,an′​ 的<strong>最大公约数必然是 1</strong></p>
</li>
<li class="lvl-2">
<p><code>lcm(a, b) * gcd(a, b) = a * b</code></p>
</li>
</ul>
<p>​	<code>a * b = 质数</code> → (<code>a = 1, b 为 质数</code>)</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>在进行 GCD 的过程中，随着 不断进行 GCD，GCD的值只可能不变或者变小</p>
</li>
</ul>
<h4 id="异或值">异或值</h4>
<ol>
<li class="lvl-3">
<p>遇到异或值可以考虑 枚举每一个位置，看是不是每一个位置的变化会对答案有影响（规律性）</p>
</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://codeforces.com/problemset/problem/2094/E">2094E</a></p>
<h4 id="二进制">二进制</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>在二进制的位移中   <strong>1</strong>是会被默认当作 (int)类型的</p>
</li>
</ul>
<p>需要 (1ll &lt;&lt; j) 防止溢出</p>
<blockquote>
<p>如 （1 &lt;&lt; j) 会被默认为 <strong>int</strong> 类型</p>
</blockquote>
<h4 id="图的创新知识">图的创新知识</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>存在多个 起点的时候，可以设置虚点。</p>
</li>
<li class="lvl-2">
<p>遇到中位数（对顶堆）</p>
</li>
<li class="lvl-2">
<p>树上的 两个节点之间 <strong>只存在一条最短路径</strong></p>
</li>
</ul>
<h4 id="二分">二分</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p>二分是 x 值成立 $\leq or \geq$ x 的值都成立</p>
</li>
<li class="lvl-2">
<p>二分具有单调性：</p>
</li>
<li class="lvl-2">
<p><strong>当 x 成立的 时候， 小于 x 的值都是一定成立的。</strong></p>
</li>
</ul>
<h4 id="对于数组中-不同位置的值-能否相互抵消，变成全是-0-的数组">对于数组中 不同位置的值 能否相互抵消，变成全是 0 的数组</h4>
<p>如果当前 元素的个数大于了 数组的和的一半<strong>肯定是不成立的</strong></p>
<h4 id="区间异或问题">区间异或问题</h4>
<p>对于一个区间 [l, r] 来说, <code>l ^ r</code> 中的 最高位的 1，相当于 最高位后面的 1都可以由 [l, r] 中的值异或得到。</p>
<h4 id="1"><strong>1</strong></h4>
<p><strong>在计算机中会自动被默认设置为 int 型，所以如果有long long 的话，需要 改变 1 的类型, (long long)</strong></p>
<h4 id="矩阵问题">矩阵问题</h4>
<h6 id="矩阵-行列异或">矩阵 行列异或</h6>
<p><a target="_blank" rel="noopener" href="https://ac.nowcoder.com/acm/contest/108589/F">矩阵构造</a></p>
<ul class="lvl-0">
<li class="lvl-2">
<p>通用思考：找一下 总的异或 的值的关系</p>
</li>
<li class="lvl-2">
<p>尝试去构造矩阵</p>
</li>
</ul>
</div><div class="article-licensing box"><div class="licensing-title"><p>算法知识册</p><p><a href="http://whalefall.fun/2025/05/06/算法板子/">http://whalefall.fun/2025/05/06/算法板子/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>Jiely</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2025-05-06</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2025-07-03</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/%E6%B2%89%E6%B7%80/">沉淀</a></div><!--!--></article></div><!--!--><div class="card"><nav class="post-navigation mt-4 level is-mobile card-content"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2025/05/08/Typora-%E8%BD%AC-obisidian/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Typora to Obisidian</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2025/04/30/%E5%85%B3%E4%BA%8E%E8%BF%87%E5%8E%BB/"><span class="level-item">关于过去</span><i class="level-item fas fa-chevron-right"></i></a></div></nav></div><div class="card" id="comments"><div class="card-content"><h3 class="title is-5">评论</h3><script src="https://utteranc.es/client.js" repo="pa-her0/utteranc_comment" issue-term="pathname" theme="github-light" crossorigin="anonymous" async></script></div></div></div><style>.column.column-left,.column.column-right{display:none}</style><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget is-sticky" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="is-flex is-mobile" href="#"><span class="mr-2">1</span><span>算法之旅</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#基础算法"><span class="mr-2">1.1</span><span>基础算法</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#费马小"><span class="mr-2">1.1.1</span><span>费马小</span></a></li></ul></li><li><a class="is-flex is-mobile" href="#数据结构"><span class="mr-2">1.2</span><span>数据结构</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#线段树历史最值操作"><span class="mr-2">1.2.1</span><span>线段树历史最值操作</span></a></li></ul></li><li><a class="is-flex is-mobile" href="#图论"><span class="mr-2">1.3</span><span>图论</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#负环-差分约束"><span class="mr-2">1.3.1</span><span>负环 差分约束</span></a></li></ul></li><li><a class="is-flex is-mobile" href="#数学"><span class="mr-2">1.4</span><span>数学</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#中国剩余定理"><span class="mr-2">1.4.1</span><span>中国剩余定理</span></a></li></ul></li><li><a class="is-flex is-mobile" href="#动态规划"><span class="mr-2">1.5</span><span>动态规划</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#区间DP"><span class="mr-2">1.5.1</span><span>区间DP</span></a></li></ul></li><li><a class="is-flex is-mobile" href="#计算几何"><span class="mr-2">1.6</span><span>计算几何</span></a></li><li><a class="is-flex is-mobile" href="#博弈论"><span class="mr-2">1.7</span><span>博弈论</span></a></li><li><a class="is-flex is-mobile" href="#杂项"><span class="mr-2">1.8</span><span>杂项</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#矩阵-行列异或"><span class="mr-2">1.8.1</span><span>矩阵 行列异或</span></a></li></ul></li></ul></li></ul></div></div><style>.menu-list > li > a.is-active + .menu-list { display: block; }.menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.jpg" alt="Jiely"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Jiely</p><p class="is-size-6 is-block">ACMer and AI</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives/"><p class="title">18</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories/"><p class="title">6</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags/"><p class="title">12</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/pa-her0" target="_blank" rel="me noopener" id="widget-follow">GitHub</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Github" href="https://github.com/pa-her0"><i class="fab fa-github"></i></a></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-06-29T03:33:40.000Z">2025-06-29</time></p><p class="title"><a href="/2025/06/29/Summer/">Summer</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2025/06/29/%E6%AF%9B%E6%A6%82%E5%A4%8D%E4%B9%A0%EF%BC%88%E5%85%A8%E9%9D%A2%E7%89%88%EF%BC%89/"><img src="/img/fuxi.png" alt="毛概复习（全面版）"></a></figure><div class="media-content"><p class="date"><time dateTime="2025-06-29T03:05:48.000Z">2025-06-29</time></p><p class="title"><a href="/2025/06/29/%E6%AF%9B%E6%A6%82%E5%A4%8D%E4%B9%A0%EF%BC%88%E5%85%A8%E9%9D%A2%E7%89%88%EF%BC%89/">毛概复习（全面版）</a></p><p class="categories"><a href="/categoriehexo-theme-claudias/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/">日常学习</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2025/06/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0-%E7%8E%8B%E9%81%93%E8%80%83%E7%A0%94/"><img src="/img/linux.png" alt="操作系统笔记 --王道考研"></a></figure><div class="media-content"><p class="date"><time dateTime="2025-06-19T10:05:38.000Z">2025-06-19</time></p><p class="title"><a href="/2025/06/19/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0-%E7%8E%8B%E9%81%93%E8%80%83%E7%A0%94/">操作系统笔记 --王道考研</a></p><p class="categories"><a href="/categoriehexo-theme-claudias/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/">日常学习</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2025/06/17/%E7%AE%97%E6%B3%95%E4%B9%8B%E7%BE%8E/"><img src="/img/ACM.png" alt="算法之美"></a></figure><div class="media-content"><p class="date"><time dateTime="2025-06-17T05:44:43.000Z">2025-06-17</time></p><p class="title"><a href="/2025/06/17/%E7%AE%97%E6%B3%95%E4%B9%8B%E7%BE%8E/">算法之美</a></p><p class="categories"><a href="/categoriehexo-theme-claudias/%E7%AE%97%E6%B3%95/">算法</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2025/06/14/YOLO/"><img src="/img/yolo.png" alt="基于YOLO的神经网络剪枝"></a></figure><div class="media-content"><p class="date"><time dateTime="2025-06-14T03:36:33.000Z">2025-06-14</time></p><p class="title"><a href="/2025/06/14/YOLO/">基于YOLO的神经网络剪枝</a></p><p class="categories"><a href="/categoriehexo-theme-claudias/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/">日常学习</a></p></div></article></div></div></div><!--!--><style>.column.column-left,.column.column-right{display:block}</style></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img class="logo-img" src="/img/drange2.png" alt="🦖" height="28"><img class="logo-img-dark" src="/img/ex4.png" alt="🦖" height="28"></a><p class="is-size-7"><span>&copy; 2025 Jiely</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/imaegoo/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">总访问量&nbsp;<span id="busuanzi_value_site_pv">-</span>&nbsp;次&nbsp;&nbsp;总访客数&nbsp;<span id="busuanzi_value_site_uv">-</span>&nbsp;人</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/deed.zh"><i class="fab fa-creative-commons-by"></i></a></p></div></div></div></div></footer><script src="/js/imaegoo/jquery/3.3.1/dist/jquery.min.js"></script><script src="/js/imaegoo/moment/2.22.2/min/moment-with-locales.min.js"></script><script src="/js/imaegoo/clipboard/2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script data-pjax src="/js/column.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script data-pjax src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="/js/imaegoo/lightgallery/1.10.0/dist/js/lightgallery.min.js" defer></script><script src="/js/imaegoo/justifiedGallery/3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><link rel="stylesheet" href="/js/imaegoo/katex/0.15.1/dist/katex.min.css"><script src="/js/imaegoo/katex/0.15.1/dist/katex.min.js" defer></script><script src="/js/imaegoo/katex/0.15.1/dist/contrib/auto-render.min.js" defer></script><script src="/js/imaegoo/katex/0.15.1/dist/contrib/mhchem.min.js" defer></script><script>window.addEventListener("load", function() {
            document.querySelectorAll('[role="article"] > .content').forEach(function(element) {
                renderMathInElement(element);
            });
        });</script><script type="text/javascript" id="MathJax-script" async>MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      },
      chtml: {
        matchFontHeight: false
      }
    };</script><script src="/js/imaegoo/mathjax/3.2.2/es5/tex-mml-chtml.js"></script><script src="/js/imaegoo/cookieconsent/3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-right",
        content: {
          message: "此网站使用 Cookie，以启用评论系统和分析功能。",
          dismiss: "知道了",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "/cookies/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script data-pjax src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><div class="searchbox-pinyin"><label class="checkbox"><input id="search-by-pinyin" type="checkbox" checked="checked"><span> 拼音检索</span></label></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/imaegoo/pinyin.js" defer></script><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script><script type="text/javascript" src="/js/imaegoo/imaegoo.js"></script><script type="text/javascript" src="/js/imaegoo/universe.js"></script></body></html>